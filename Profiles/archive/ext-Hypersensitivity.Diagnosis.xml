<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="ext-Hypersensitivity.Diagnosis" />
  <url value="http://nictiz.nl/fhir/StructureDefinition/ext-Hypersensitivity.Diagnosis" />
  <version value="1.0.0-beta.2" />
  <name value="ExtHypersensitivityDiagnosis" />
  <title value="ext Hypersensitivity.Diagnosis" />
  <status value="draft" />
  <publisher value="Nictiz" />
  <contact>
    <name value="Nictiz" />
    <telecom>
      <system value="url" />
      <value value="https://www.nictiz.nl" />
      <use value="work" />
    </telecom>
  </contact>
  <description value="An extension to provide a diagnosis that represents the hypersensitivity as interpretation of the condition." />
  <purpose value="This extension represents the Diagnosis concept for implementations following the information standard [CiO](https://informatiestandaarden.nictiz.nl/wiki/Landingspagina_Contra-indicaties_en_Overgevoeligheden)." />
  <copyright value="Copyright and related rights waived via CC0, https://creativecommons.org/publicdomain/zero/1.0/. This does not apply to information from third parties, for example a medical terminology system. The implementer alone is responsible for identifying and obtaining any necessary licenses or authorizations to utilize third party IP in connection with the specification or otherwise." />
  <fhirVersion value="4.0.1" />
  <mapping>
    <identity value="cio-dataset-200-beta2-20231215" />
    <uri value="https://decor.nictiz.nl/pub/cio/cio-html-20231215T150542/ds-2.16.840.1.113883.2.4.3.11.60.26.1.2-2020-04-02T000000.html" />
    <name value="ART-DECOR Dataset Contraindications and hypersensitivities 2.0.0-beta.2 20231215" />
  </mapping>
  <kind value="complex-type" />
  <abstract value="false" />
  <context>
    <type value="element" />
    <expression value="AllergyIntolerance" />
  </context>
  <type value="Extension" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Extension" />
  <derivation value="constraint" />
  <differential>
    <element id="Extension">
      <path value="Extension" />
      <max value="1" />
      <mapping>
        <identity value="cio-dataset-200-beta2-20231215" />
        <map value="cio-dataelement-20-795" />
        <comment value="Diagnosis" />
      </mapping>
    </element>
    <element id="Extension.extension">
      <path value="Extension.extension" />
      <min value="1" />
    </element>
    <element id="Extension.extension:diagnosisName">
      <path value="Extension.extension" />
      <sliceName value="diagnosisName" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Extension.extension:diagnosisName.url">
      <path value="Extension.extension.url" />
      <fixedUri value="diagnosisName" />
    </element>
    <element id="Extension.extension:diagnosisName.value[x]">
      <path value="Extension.extension.value[x]" />
      <short value="DiagnosisName" />
      <definition value="The term with associated code that the health professional selects from the used code list. Represents the hypersensitivity as interpretation of the condition." />
      <comment value="Ideally the DiagnosisName (cio-dataelement-20-796) would be mapped on `AllergyIntolerance.code` instead of using an extension. However, the cardinality of `.code` is 0..1, and both Substance (cio-dataelement-20-793) and DiagnosisName semantically map to that element. Moreover these data elements describe the hypersensitivity from different points of view, namely from the substance that triggers a reaction, and the underlying diagnosis of the hypersensitivity, respectively. Therefore they cannot be viewed as representations of the same concept with slightly different granularity and it is thus not allowed to include them both as different `.code.coding`s. As Substance contains more detailed information regarding the nature of the hypersensitivity, it has been chosen to map directly to `.code`." />
      <alias value="DiagnoseNaam" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <binding>
        <strength value="required" />
        <description value="TODO" />
      </binding>
      <mapping>
        <identity value="cio-dataset-200-beta2-20231215" />
        <map value="cio-dataelement-20-796" />
        <comment value="DiagnosisName" />
      </mapping>
    </element>
    <element id="Extension.extension:furtherSpecificationDiagnosisName">
      <path value="Extension.extension" />
      <sliceName value="furtherSpecificationDiagnosisName" />
      <max value="1" />
    </element>
    <element id="Extension.extension:furtherSpecificationDiagnosisName.url">
      <path value="Extension.extension.url" />
      <fixedUri value="furtherSpecificationDiagnosisName" />
    </element>
    <element id="Extension.extension:furtherSpecificationDiagnosisName.value[x]">
      <path value="Extension.extension.value[x]" />
      <short value="FurtherSpecificationDiagnosisName" />
      <definition value="A more detailed description of the name of the hypersensitivity in free text, when this detail is not available in the used code list." />
      <alias value="NadereSpecificatieDiagnoseNaam" />
      <type>
        <code value="string" />
      </type>
      <mapping>
        <identity value="cio-dataset-200-beta2-20231215" />
        <map value="cio-dataelement-20-797" />
        <comment value="FurtherSpecificationDiagnosisName" />
      </mapping>
    </element>
    <element id="Extension.url">
      <path value="Extension.url" />
      <fixedUri value="http://nictiz.nl/fhir/StructureDefinition/ext-Hypersensitivity.Diagnosis" />
    </element>
    <element id="Extension.value[x]">
      <path value="Extension.value[x]" />
      <max value="0" />
    </element>
  </differential>
</StructureDefinition>